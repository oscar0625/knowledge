<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit" />
    <title>set和Map</title>
</head>

<body>

</body>
<script>
    //  一、Set 它类似于数组，但是成员的值都是唯一的，没有重复的值。
    let s = new Set([1, 2, 3]);
    //  1.Set实例的属性
    //      s.size：返回Set实例的成员总数。
    //  2.Set实例的方法
    //  操作方法
    //      s.add(value)    添加某个值，返回 Set 结构本身。
    //      s.delete(value) 删除某个值，返回一个布尔值，
    //      s.has(value)    返回一个布尔值
    //      s.clear()       清除所有成员，没有返回值。
    //  遍历方法
    //      s.keys()：返回键名的遍历器
    //      s.values()：返回键值的遍历器
    //      s.entries()：返回键值对的遍历器
    //      s.forEach()：使用回调函数遍历每个成员
    //  3.set转数组
    //      a.扩展运算符 [...s]
    //      b.Array.from(s)
    //  4.set的应用
    let a = new Set([1, 2, 3]);
    let b = new Set([4, 3, 2]);
    // 并集
    let union = new Set([...a, ...b]);
    // 交集
    let intersect = new Set([...a].filter(x => b.has(x)));
    //  5.WeakSet   大体类似Set
    //  与set的区别：首先，WeakSet的成员只能是对象，不能是其他类型的值。其次WeakSet中的对象是弱引用，即垃圾回收机制不考虑WeakSet对该对象的引用。
    //  用途：储存dom节点，而不必担心这个节点从文档移除时会发生内存泄漏


    //  二、Map 它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。
    let m = new Map([
        ['name', '张三'],
        ['title', 'Author']
    ]);
    //  1.Map实例的属性
    //      m.size：属性返回 Map 结构的成员总数。
    //  2.Map实例的方法
    //  操作方法
    //      m.set(key,value)设置键名key对应的键值为value，然后返回整个 Map 结构。如果key已经有值，则键值会被更新，否则就新生成该键。
    //      m.get(key)      读取key对应的键值，如果找不到key，返回undefined。
    //      m.delete(key)   方法删除某个键，返回一个布尔值，
    //      m.has(key)      返回一个布尔值
    //      m.clear()       清除所有成员，没有返回值。
    //  遍历方法
    //      m.keys()：返回键名的遍历器
    //      m.values()：返回键值的遍历器
    //      m.entries()：返回键值对的遍历器
    //      m.forEach()：使用回调函数遍历每个成员
    //  3.Map结构的转化
    //  Map转数组：扩展运算符 [...m]
    //  数组转Map：将数组传入 Map 构造函数
    //  Map 转为对象
    function strMapToObj(strMap) {
        let obj = {};
        for (let [k, v] of strMap) {
            obj[k] = v;
        }
        return obj;
    }
    //  对象转为 Map
    function objToStrMap(obj) {
        let strMap = new Map();
        for (let k of Object.keys(obj)) {
            strMap.set(k, obj[k]);
        }
        return strMap;
    }
    //  4.WeakMap
    //  与map的区别：只接受对象作为键名（null除外）不接受其他类型的值作为键名，键名指向的对象不计入垃圾回收机制
    //  用途：dom节点作为键名
</script>

</html>